services:
  indexer-app:
    build: .
    container_name: onedrive_indexer
    ports:
      - "8501:8501"
    volumes:
      # Mount the current directory to /app so code changes reflect instantly (dev mode)
      - .:/app
      # Persist the Firebase/Auth token cache if we use local files for that
      - ./data:/data
      # Mount a local folder for "Local Storage" provider
      # Uses env var LOCAL_FILES_PATH if set (e.g. for Windows OneDrive), otherwise defaults to ./local_files
      - ${LOCAL_FILES_PATH:-./local_files}:/data/local_files
    env_file:
      - .env
    restart: unless-stopped
